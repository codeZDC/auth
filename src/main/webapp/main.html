<!DOCTYPE html>
<html lang="zh-cn">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Document</title>
<link rel="stylesheet" href="./static/layui/css/layui.css" media="all">
<style>
.info-box {
	height: 85px;
	background-color: white;
	background-color: #ecf0f5;
}

.info-box .info-box-icon {
	border-top-left-radius: 2px;
	border-top-right-radius: 0;
	border-bottom-right-radius: 0;
	border-bottom-left-radius: 2px;
	display: block;
	float: left;
	height: 85px;
	width: 85px;
	text-align: center;
	font-size: 45px;
	line-height: 85px;
	background: rgba(0, 0, 0, 0.2);
}

.info-box .info-box-content {
	padding: 5px 10px;
	margin-left: 85px;
}

.info-box .info-box-content .info-box-text {
	display: block;
	font-size: 14px;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	text-transform: uppercase;
}

.info-box .info-box-content .info-box-number {
	display: block;
	font-weight: bold;
	font-size: 18px;
}

.major {
	font-weight: 10px;
	color: #01AAED;
}

.main {
	margin-top: 25px;
}

.main .layui-row {
	margin: 10px 0;
}

.time:BEFORE {
	content: '创建时间 < ';
	color: red;
}

.time:AFTER {
	content: ' > ';
	color: red;
}
</style>
</head>

<body>
	<div class="layui-fluid main">
		<fieldset class="layui-elem-field layui-field-title site-title">
			<legend>
				<a name="use">遵义应急救灾项目开发记录</a>
			</legend>
		</fieldset>
		<div class="layui-row">
			<div class="layui-col-md12">
				<ul class="layui-timeline">
					<li class="layui-timeline-item"><i
						class="layui-icon layui-timeline-axis">&#xe63f;</i>
						<div class="layui-timeline-content layui-text">
							<h3 class="layui-timeline-title">开发任务 :</h3>
							<ul>
								<li class="time">2018年6月6日14:25:13</li>
								<li>遵义应急系统权限系统后台搭建,页面采用layui</li>
								<li>根据救灾系统完善系统模块</li>
							</ul>
						</div></li>

					<li class="layui-timeline-item"><i
						class="layui-icon layui-timeline-axis">&#xe63f;</i>
						<div class="layui-timeline-content layui-text">
							<h3 class="layui-timeline-title">模块搭建与开发 :</h3>
							<ul>
								<li class="time">2018年6月6日14:32:44</li>
								<li>后台采用SSM ,数据库采用MYSQL</li>
							</ul>
						</div>
					</li>
					
					<li class="layui-timeline-item"><i
						class="layui-icon layui-timeline-axis">&#xe63f;</i>
						<div class="layui-timeline-content layui-text">
							<h3 class="layui-timeline-title">权限模块开发 :</h3>
							<ul>
								<li class="time">2018年6月7日16:49:48</li>
								<li>已通过测试,使用自定义权限对资源进行登录拦截和权限拦截</li>
								<li>我们只需要控制主要的url权限,由于路径的串用,比如在菜单列表需要获取
									父级菜单,所以我们将
								</li>
							</ul>
						</div>
					</li>
					<li class="layui-timeline-item"><i
						class="layui-icon layui-timeline-axis">&#xe63f;</i>
						<div class="layui-timeline-content layui-text">
							<h3 class="layui-timeline-title">开发中的难点 :</h3>
							<ul>
								<li class="time">2018年6月8日11:46:55</li>
								<li>我们只需要控制主要的url权限,由于路径的串用,比如在菜单列表需要获取
									父级菜单,所以我们将其访问路径加上/admin,让其过滤,没必要在权限处理
								</li>
								<li>由于要实现动静分离,我们已经不能控制html访问了,因为nginx处理了,我们只能通过ajax中的statusCode处理403
									我已经修改了jquery中的statusCode默认处理403状态,但是在layui中获取数据列表的时候还没处理,稍后处理一下
								</li>
							</ul>
						</div>
					</li>
					<li class="layui-timeline-item"><i
						class="layui-icon layui-timeline-axis">&#xe63f;</i>
						<div class="layui-timeline-content layui-text">
							<h3 class="layui-timeline-title">项目架构说明 :</h3>
							<ul>
								<li class="time">2018年6月12日15:40:11</li>
								<li>项目采用动静分离,前端框架采用layui,通过异步调用后台接口完成渲染理</li>
								<li>安全框架使用自定义框架,可通过在web.xml中配置布尔类型的urlControl控制对路径进行访问控制</li>
								<li>角色配置权限树使用ztree插件,通过配置权限可对路径进行访问控制和菜单的动态显示,菜单动态显示原本想通过
								登录角色获取相应的菜单保存到域中,但是sql太过复杂,就使用了自定义标签实现,相对简单</li>
								<li>当然,在路径控制和菜单显示自定义标签中都需要对角色权限的比对,会频繁的操作数据库,为了提升性能,
								我们需要将角色权限缓存起来,目前使用的是mybatis的二级缓存,针对mapper命名空间进行缓存,在用户授权修改的时候会清空缓存</li>
							</ul>
						</div>
					</li>
					
					
					<li class="layui-timeline-item"><i
						class="layui-icon layui-timeline-axis">&#xe63f;</i>
						<div class="layui-timeline-content layui-text">
							<div class="layui-timeline-title">未完待续...</div>
						</div></li>
				</ul>
			</div>
		</div>
	</div>
	<script src="./static/layui/layui.js"></script>
	<script>
		layui.use('jquery', function() {
			var $ = layui.jquery;
			$('#test').on('click', function() {
				parent.message.show({
					skin : 'cyan'
				});
			});
		});
	</script>
</body>

</html>